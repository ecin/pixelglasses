#!/usr/bin/env ruby

klass = ARGV[0]
# Let's be UNIX friendly and exit with a status of 1 if we screw up.
exit 1 unless Kernel.const_defined?(klass)

klass = Kernel.const_get klass

klasses = []
(klass.ancestors - klass.included_modules).reverse.each do |k|
  klasses << {:klass => k.to_s,
              :modules => k.included_modules.map(&:to_s).sort}
end

# NOW require json, after we got our vanilla modules.
require 'json'

puts klasses.to_json

# No errors, let's get out of here!
exit 0
